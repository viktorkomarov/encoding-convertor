#include <stdio.h>
#include "encoder.h"

static utf_8 cp1251[] = {
    {2, {0xd0, 0x82}}, {2, {0xd0, 0x83}},{3, {0xe2, 0x80, 0x9a}}, {2, {0xd1, 0x93}}, 
    {3, {0xe2, 0x80, 0x9e}}, {3, {0xe2, 0x80, 0xa6}}, {3, {0xe2, 0x80, 0xa0}}, 
    {3, {0xe2, 0x80, 0xa1}}, {3, {0xe2, 0x82, 0xac}}, {3, {0xe2, 0x80, 0xb0}},
	{2, {0xd0, 0x89}}, {3, {0xe2, 0x80, 0xb9}}, {2, {0xd0, 0x8a}}, {2, {0xd0, 0x8c}},
	{2, {0xd0, 0x8b}}, {2, {0xd0, 0x8f}}, {2, {0xd1, 0x92}}, {3, {0xe2, 0x80, 0x98}},
	{3, {0xe2, 0x80, 0x99}}, {3, {0xe2, 0x80, 0x9c}}, {3, {0xe2, 0x80, 0x9d}}, 
    {3, {0xe2, 0x80, 0xa2}}, {3, {0xe2, 0x80, 0x93}}, {3, {0xe2, 0x80, 0x94}}, 
    {3, {0xef, 0xbf, 0xbd}}, {3, {0xe2, 0x84, 0xa2}}, {2, {0xd1, 0x99}}, 
    {3, {0xe2, 0x80, 0xba}}, {2, {0xd1, 0x9a}}, {2, {0xd1, 0x9c}},
	{2, {0xd1, 0x9b}}, {2, {0xd1, 0x9f}},{2, {0xc2, 0xa0}}, {2, {0xd0, 0x8e}},
	{2, {0xd1, 0x9e}}, {2, {0xd0, 0x88}}, {2, {0xc2, 0xa4}}, {2, {0xd2, 0x90}},
	{2, {0xc2, 0xa6}}, {2, {0xc2, 0xa7}}, {2, {0xd0, 0x81}}, {2, {0xc2, 0xa9}},
	{2, {0xd0, 0x84}}, {2, {0xc2, 0xab}}, {2, {0xc2, 0xac}}, {2, {0xc2, 0xad}}, 
    {2, {0xc2, 0xae}}, {2, {0xd0, 0x87}}, {2, {0xc2, 0xb0}}, {2, {0xc2, 0xb1}}, 
    {2, {0xd0, 0x86}}, {2, {0xd1, 0x96}}, {2, {0xd2, 0x91}}, {2, {0xc2, 0xb5}},
    {2, {0xc2, 0xb6}}, {2, {0xc2, 0xb7}}, {2, {0xd1, 0x91}}, {3, {0xe2, 0x84, 0x96}}, 
    {2, {0xd1, 0x94}}, {2, {0xc2, 0xbb}}, {2, {0xd1, 0x98}}, {2, {0xd0, 0x85}}, 
	{2, {0xd1, 0x95}}, {2, {0xd1, 0x97}}, {2, {0xd0, 0x90}}, {2, {0xd0, 0x91}}, 
	{2, {0xd0, 0x92}}, {2, {0xd0, 0x93}}, {2, {0xd0, 0x94}}, {2, {0xd0, 0x95}}, 
	{2, {0xd0, 0x96}}, {2, {0xd0, 0x97}}, {2, {0xd0, 0x98}}, {2, {0xd0, 0x99}}, 
	{2, {0xd0, 0x9a}}, {2, {0xd0, 0x9b}}, {2, {0xd0, 0x9c}}, {2, {0xd0, 0x9d}}, 
	{2, {0xd0, 0x9e}}, {2, {0xd0, 0x9f}}, {2, {0xd0, 0xa0}}, {2, {0xd0, 0xa1}}, 
	{2, {0xd0, 0xa2}}, {2, {0xd0, 0xa3}}, {2, {0xd0, 0xa4}}, {2, {0xd0, 0xa5}}, 
	{2, {0xd0, 0xa6}}, {2, {0xd0, 0xa7}}, {2, {0xd0, 0xa8}}, {2, {0xd0, 0xa9}}, 
	{2, {0xd0, 0xaa}}, {2, {0xd0, 0xab}}, {2, {0xd0, 0xac}}, {2, {0xd0, 0xad}},  
	{2, {0xd0, 0xae}}, {2, {0xd0, 0xaf}}, {2, {0xd0, 0xb0}}, {2, {0xd0, 0xb1}}, 
	{2, {0xd0, 0xb2}}, {2, {0xd0, 0xb3}}, {2, {0xd0, 0xb4}}, {2, {0xd0, 0xb5}}, 
	{2, {0xd0, 0xb6}}, {2, {0xd0, 0xb7}}, {2, {0xd0, 0xb8}}, {2, {0xd0, 0xb9}}, 
	{2, {0xd0, 0xba}}, {2, {0xd0, 0xbb}}, {2, {0xd0, 0xbc}}, {2, {0xd0, 0xbd}}, 
	{2, {0xd0, 0xbe}}, {2, {0xd0, 0xbf}}, {2, {0xd1, 0x80}}, {2, {0xd1, 0x81}}, 
	{2, {0xd1, 0x82}}, {2, {0xd1, 0x83}}, {2, {0xd1, 0x84}}, {2, {0xd1, 0x85}}, 
	{2, {0xd1, 0x86}}, {2, {0xd1, 0x87}}, {2, {0xd1, 0x88}}, {2, {0xd1, 0x89}}, 
	{2, {0xd1, 0x8a}}, {2, {0xd1, 0x8b}}, {2, {0xd1, 0x8c}}, {2, {0xd1, 0x8d}}, 
	{2, {0xd1, 0x8e}}, {2, {0xd1, 0x8f}}
};

utf_8 encode_cp1251(int symbol)
{
    utf_8 result = {1, {symbol}};
    if (!(0x80 & symbol)) {
        return result;
    }

    int offset = symbol-128;
    return cp1251[offset];
}